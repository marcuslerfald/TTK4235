\hypertarget{fsm_8h}{}\section{source/fsm.h File Reference}
\label{fsm_8h}\index{source/fsm.\+h@{source/fsm.\+h}}


Finite state machine for an elevator.  


This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=262pt]{fsm_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{fsm_8h_afb1a2f0d6c57fd6e0f5f19a8849db177}{F\+O\+R\+E\+A\+C\+H\+\_\+\+S\+T\+A\+TE}(S\+T\+A\+TE)
\begin{DoxyCompactList}\small\item\em All the states the elevator can be in. \end{DoxyCompactList}\item 
\#define \hyperlink{fsm_8h_a44c518a36b9b9e429f17c7f9b1a621e0}{F\+O\+R\+E\+A\+C\+H\+\_\+\+E\+V\+E\+NT}(E\+V\+E\+NT)
\begin{DoxyCompactList}\small\item\em All events recognized by the state machine. \end{DoxyCompactList}\item 
\#define \hyperlink{fsm_8h_aed8760364c7992625d06c93d12b2496d}{G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+E\+N\+UM}(E\+N\+UM)~E\+N\+UM,
\item 
\#define \hyperlink{fsm_8h_adf58d994c35f18ec84b628d8321f52e5}{G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+S\+T\+R\+I\+NG}(S\+T\+R\+I\+NG)~\#S\+T\+R\+I\+NG,
\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{fsm_8h_a493217321e8eec123f3a1a788dddcf11}\label{fsm_8h_a493217321e8eec123f3a1a788dddcf11}} 
enum {\bfseries fsm\+\_\+event\+\_\+t} 
\item 
\mbox{\Hypertarget{fsm_8h_aefd70b8b91d72cbd548b6c38f385983b}\label{fsm_8h_aefd70b8b91d72cbd548b6c38f385983b}} 
enum {\bfseries fsm\+\_\+state\+\_\+t} 
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{fsm_8h_a6d28dcad43166c03b061f129a8759018}{fsm\+\_\+init} ()
\begin{DoxyCompactList}\small\item\em Sets initial state of state machine. \end{DoxyCompactList}\item 
void \hyperlink{fsm_8h_ae32fa4506316ff022e43d7b7ca2d34b2}{fsm\+\_\+dispatch} (fsm\+\_\+event\+\_\+t event)
\begin{DoxyCompactList}\small\item\em Dispatches event to the state machine. \end{DoxyCompactList}\item 
fsm\+\_\+state\+\_\+t \hyperlink{fsm_8h_a5e2a31ca4d677528882e4654158b7b70}{fsm\+\_\+get\+\_\+state} ()
\begin{DoxyCompactList}\small\item\em Returns current state of state machine. \end{DoxyCompactList}\item 
int \hyperlink{fsm_8h_a6cd8cafb76b77cf609f4aec4978a4f60}{fsm\+\_\+get\+\_\+floor} ()
\begin{DoxyCompactList}\small\item\em Retruns current floor of elevator. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Finite state machine for an elevator. 

\begin{DoxyNote}{Note}
Based on \href{https://barrgroup.com/embedded-systems/how-to/state-machines-event-driven-systems}{\tt https\+://barrgroup.\+com/embedded-\/systems/how-\/to/state-\/machines-\/event-\/driven-\/systems} 
\end{DoxyNote}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{fsm_8h_a44c518a36b9b9e429f17c7f9b1a621e0}\label{fsm_8h_a44c518a36b9b9e429f17c7f9b1a621e0}} 
\index{fsm.\+h@{fsm.\+h}!F\+O\+R\+E\+A\+C\+H\+\_\+\+E\+V\+E\+NT@{F\+O\+R\+E\+A\+C\+H\+\_\+\+E\+V\+E\+NT}}
\index{F\+O\+R\+E\+A\+C\+H\+\_\+\+E\+V\+E\+NT@{F\+O\+R\+E\+A\+C\+H\+\_\+\+E\+V\+E\+NT}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{F\+O\+R\+E\+A\+C\+H\+\_\+\+E\+V\+E\+NT}{FOREACH\_EVENT}}
{\footnotesize\ttfamily \#define F\+O\+R\+E\+A\+C\+H\+\_\+\+E\+V\+E\+NT(\begin{DoxyParamCaption}\item[{}]{E\+V\+E\+NT }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}
EVENT(EVENT\_FLOOR\_1)                \(\backslash\)
        EVENT(EVENT\_FLOOR\_2)                \(\backslash\)
        EVENT(EVENT\_FLOOR\_3)                \(\backslash\)
        EVENT(EVENT\_FLOOR\_4)                \(\backslash\)
        EVENT(EVENT\_HW\_INIT\_DONE)           \(\backslash\)
        EVENT(EVENT\_STOP\_BUTTON\_PRESSED)    \(\backslash\)
        EVENT(EVENT\_STOP\_BUTTON\_RELEASED)   \(\backslash\)
        EVENT(EVENT\_TIMER\_TIMEOUT)          \(\backslash\)
        EVENT(EVENT\_OBSTRUCTION\_ACTIVE)     \(\backslash\)
        EVENT(EVENT\_QUEUE\_NOT\_EMPTY)        \(\backslash\)
        EVENT(EVENT\_ENTRY)                  \(\backslash\)
        EVENT(EVENT\_EXIT)
\end{DoxyCode}


All events recognized by the state machine. 

\begin{DoxyNote}{Note}
E\+V\+E\+N\+T\+\_\+\+F\+L\+O\+O\+R1-\/4 placed in beginning to use numerical value 

E\+V\+E\+N\+T\+\_\+\+E\+N\+T\+RY and E\+V\+E\+N\+T\+\_\+\+E\+X\+IT for internal F\+SM use only 
\end{DoxyNote}


Definition at line 30 of file fsm.\+h.

\mbox{\Hypertarget{fsm_8h_afb1a2f0d6c57fd6e0f5f19a8849db177}\label{fsm_8h_afb1a2f0d6c57fd6e0f5f19a8849db177}} 
\index{fsm.\+h@{fsm.\+h}!F\+O\+R\+E\+A\+C\+H\+\_\+\+S\+T\+A\+TE@{F\+O\+R\+E\+A\+C\+H\+\_\+\+S\+T\+A\+TE}}
\index{F\+O\+R\+E\+A\+C\+H\+\_\+\+S\+T\+A\+TE@{F\+O\+R\+E\+A\+C\+H\+\_\+\+S\+T\+A\+TE}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{F\+O\+R\+E\+A\+C\+H\+\_\+\+S\+T\+A\+TE}{FOREACH\_STATE}}
{\footnotesize\ttfamily \#define F\+O\+R\+E\+A\+C\+H\+\_\+\+S\+T\+A\+TE(\begin{DoxyParamCaption}\item[{}]{S\+T\+A\+TE }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}
STATE(STATE\_INIT)                   \(\backslash\)
        STATE(STATE\_UNKNOWN\_FLOOR)          \(\backslash\)
        STATE(STATE\_IDLE)                   \(\backslash\)
        STATE(STATE\_MOVING)                 \(\backslash\)
        STATE(STATE\_DOOR\_OPEN)              \(\backslash\)
        STATE(STATE\_EMERGENCY\_STOP)         \(\backslash\)
        STATE(STATE\_EMERGENCY\_STOP\_FLOOR)   \(\backslash\)
        STATE(STATE\_EMERGENCY\_STOP\_NOWHERE)
\end{DoxyCode}


All the states the elevator can be in. 



Definition at line 14 of file fsm.\+h.

\mbox{\Hypertarget{fsm_8h_aed8760364c7992625d06c93d12b2496d}\label{fsm_8h_aed8760364c7992625d06c93d12b2496d}} 
\index{fsm.\+h@{fsm.\+h}!G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+E\+N\+UM@{G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+E\+N\+UM}}
\index{G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+E\+N\+UM@{G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+E\+N\+UM}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+E\+N\+UM}{GENERATE\_ENUM}}
{\footnotesize\ttfamily \#define G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+E\+N\+UM(\begin{DoxyParamCaption}\item[{}]{E\+N\+UM }\end{DoxyParamCaption})~E\+N\+UM,}

Generates enumerated values 

Definition at line 45 of file fsm.\+h.

\mbox{\Hypertarget{fsm_8h_adf58d994c35f18ec84b628d8321f52e5}\label{fsm_8h_adf58d994c35f18ec84b628d8321f52e5}} 
\index{fsm.\+h@{fsm.\+h}!G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+S\+T\+R\+I\+NG@{G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+S\+T\+R\+I\+NG}}
\index{G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+S\+T\+R\+I\+NG@{G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+S\+T\+R\+I\+NG}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+S\+T\+R\+I\+NG}{GENERATE\_STRING}}
{\footnotesize\ttfamily \#define G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+S\+T\+R\+I\+NG(\begin{DoxyParamCaption}\item[{}]{S\+T\+R\+I\+NG }\end{DoxyParamCaption})~\#S\+T\+R\+I\+NG,}

Generates stringified values 

Definition at line 48 of file fsm.\+h.



\subsection{Function Documentation}
\mbox{\Hypertarget{fsm_8h_ae32fa4506316ff022e43d7b7ca2d34b2}\label{fsm_8h_ae32fa4506316ff022e43d7b7ca2d34b2}} 
\index{fsm.\+h@{fsm.\+h}!fsm\+\_\+dispatch@{fsm\+\_\+dispatch}}
\index{fsm\+\_\+dispatch@{fsm\+\_\+dispatch}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{fsm\+\_\+dispatch()}{fsm\_dispatch()}}
{\footnotesize\ttfamily void fsm\+\_\+dispatch (\begin{DoxyParamCaption}\item[{fsm\+\_\+event\+\_\+t}]{event }\end{DoxyParamCaption})}



Dispatches event to the state machine. 


\begin{DoxyParams}{Parameters}
{\em event} & The event to be handled by the state machine \\
\hline
\end{DoxyParams}


Definition at line 66 of file fsm.\+c.

\mbox{\Hypertarget{fsm_8h_a6cd8cafb76b77cf609f4aec4978a4f60}\label{fsm_8h_a6cd8cafb76b77cf609f4aec4978a4f60}} 
\index{fsm.\+h@{fsm.\+h}!fsm\+\_\+get\+\_\+floor@{fsm\+\_\+get\+\_\+floor}}
\index{fsm\+\_\+get\+\_\+floor@{fsm\+\_\+get\+\_\+floor}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{fsm\+\_\+get\+\_\+floor()}{fsm\_get\_floor()}}
{\footnotesize\ttfamily int fsm\+\_\+get\+\_\+floor (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Retruns current floor of elevator. 

\begin{DoxyReturn}{Returns}
int floor number, 0 indexed 
\end{DoxyReturn}


Definition at line 77 of file fsm.\+c.

\mbox{\Hypertarget{fsm_8h_a5e2a31ca4d677528882e4654158b7b70}\label{fsm_8h_a5e2a31ca4d677528882e4654158b7b70}} 
\index{fsm.\+h@{fsm.\+h}!fsm\+\_\+get\+\_\+state@{fsm\+\_\+get\+\_\+state}}
\index{fsm\+\_\+get\+\_\+state@{fsm\+\_\+get\+\_\+state}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{fsm\+\_\+get\+\_\+state()}{fsm\_get\_state()}}
{\footnotesize\ttfamily fsm\+\_\+state\+\_\+t fsm\+\_\+get\+\_\+state (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Returns current state of state machine. 

\begin{DoxyReturn}{Returns}
fsm\+\_\+state\+\_\+t The current state of the state machine 
\end{DoxyReturn}


Definition at line 72 of file fsm.\+c.

\mbox{\Hypertarget{fsm_8h_a6d28dcad43166c03b061f129a8759018}\label{fsm_8h_a6d28dcad43166c03b061f129a8759018}} 
\index{fsm.\+h@{fsm.\+h}!fsm\+\_\+init@{fsm\+\_\+init}}
\index{fsm\+\_\+init@{fsm\+\_\+init}!fsm.\+h@{fsm.\+h}}
\subsubsection{\texorpdfstring{fsm\+\_\+init()}{fsm\_init()}}
{\footnotesize\ttfamily void fsm\+\_\+init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Sets initial state of state machine. 

\begin{DoxyNote}{Note}
Should only be called once at startup of program 
\end{DoxyNote}


Definition at line 61 of file fsm.\+c.

